---
layout: post
title:  "通过IPv6网络访问IPv4资源"
date:   2012-02-19 11:21:00
---

引子：昨天刚在OS X下通过锐捷认证上网，现在又贪得无厌了。呵呵，谁叫我们学校的IPv6网络是免费的呢，不好好利用的话就可惜了。顺便扯一下我们学校的收费标准，一个月￥10/6G，超出部分3￥/G，个人觉得还行，不算很贵，比起我有的高中同学一个月几十块要便宜多了。

NAT64/DNS64简介：

> NAT64是一种有状态的网络地址与协议转换技术，一般只支持通过IPv6网络侧用户发起连接访问IPv4侧网络资源。但NAT64也支持通过手工配置静态映射关系，实现IPv4网络主动发起连接访问IPv6网络。NAT64可实现TCP、UDP、ICMP协议下的IPv6与IPv4网络地址和协议转换。
> DNS64则主要是配合NAT64工作，主要是将DNS查询信息中的A记录（IPv4地址）合成到AAAA记录（IPv6地址）中，返回合成的AAAA记录用户给IPv6侧用户。DNS64也解决了NAT-PT中的DNS-ALG存在的缺陷。

相关的原理以及背景知识可以搜索关键词`NAT64/DNS64`。下面我主要说一下简单的设置。

先说一下在Ubuntu下的设置（*nix系下应该都大同小异），测试通过。

首先要确保IPv6网络的畅通(及免费)，然后打开网络管理，选择相应的有线连接。IPv4选择禁用，IPv6选择仅地址，再把DNS服务器填上（我所知道的DNS服务器就是`2001:778::37`，并且测试通过，网络上应该还有可用的DNS服务器地址，可以搜索一下），最后重启网络就行了。

Windows下的话，<del>没有进行测试</del>，简单说一下吧。打开“本地连接”的属性，启用“Internet协议版本6(TCP/IPv6)”，DNS服务器地址设定为`2001:778::37`，取消“Internet协议版本4(TCP/IPv4)”，即不使用IPv4网络协议。好了，最后重启网络就行了。

PS: 其实这么做还有其他的好处：

* 不用再为GFW而苦恼了，尽情地呼吸自由的空气吧；
* 因为我们学校晚上要断网，不过IPv6是不受影响的，所以呢，你懂的。
